{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport cn from 'classnames';\nimport React, { useEffect, useRef } from 'react';\nimport dates from './dates';\nimport useFocusManager from './useFocusManager';\n\nfunction clamp(date, min, max) {\n  return dates.max(dates.min(date, max), min);\n}\n\nfunction CalendarView(_ref) {\n  let {\n    className,\n    focusedItem,\n    onKeyDown,\n    children,\n    'aria-labelledby': labelledby\n  } = _ref;\n  const ref = useRef(null);\n  const [focusEvents, focused] = useFocusManager(ref);\n  useEffect(() => {\n    var _node$querySelector;\n\n    const node = ref.current;\n    if (!node || !focused) return;\n    (_node$querySelector = node.querySelector('.rw-cell[tabindex]')) == null ? void 0 : _node$querySelector.focus();\n  }, [focusedItem, focused, ref]);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    role: \"grid\",\n    ref: ref,\n    tabIndex: -1\n  }, focusEvents, {\n    onKeyDown: onKeyDown,\n    \"aria-labelledby\": labelledby,\n    className: cn(className, 'rw-nav-view', 'rw-calendar-grid')\n  }), children);\n}\n\nfunction CalendarViewCell(_ref2) {\n  let {\n    onChange,\n    min,\n    max,\n    date,\n    unit,\n    disabled,\n    selected,\n    focusedItem,\n    viewUnit,\n    children,\n    label\n  } = _ref2;\n\n  const isEqual = nextDate => dates.eq(date, nextDate, unit);\n\n  const isEmpty = !dates.inRange(date, min, max, unit);\n  const isDisabled = disabled || isEmpty; // const isNow = now && isEqual(now)\n\n  const isFocused = !disabled && !isEmpty && isEqual(focusedItem);\n  const isSelected = selected && isEqual(selected);\n  const isOffView = date && focusedItem && viewUnit && dates[viewUnit](date) !== dates[viewUnit](focusedItem);\n\n  const handleChange = () => {\n    onChange(clamp(date, min, max));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    role: \"gridcell\",\n    title: label,\n    \"aria-label\": label,\n    \"aria-readonly\": disabled,\n    \"aria-selected\": Boolean(isSelected),\n    tabIndex: isFocused ? 0 : void 0,\n    onClick: !isDisabled ? handleChange : undefined,\n    className: cn('rw-cell', // isNow && 'rw-now',\n    isDisabled && 'rw-state-disabled', isEmpty && 'rw-cell-not-allowed', isOffView && 'rw-cell-off-range', isSelected && 'rw-state-selected')\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": true\n  }, children));\n}\n\nCalendarView.Body = props => /*#__PURE__*/React.createElement(\"div\", _extends({\n  role: \"rowgroup\",\n  className: \"rw-calendar-body\"\n}, props));\n\nCalendarView.Row = props => /*#__PURE__*/React.createElement(\"div\", _extends({\n  role: \"row\",\n  className: \"rw-calendar-row\"\n}, props));\n\nCalendarView.Cell = CalendarViewCell;\nexport default CalendarView;","map":null,"metadata":{},"sourceType":"module"}